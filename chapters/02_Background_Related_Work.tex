\section{Background and Related Work}\label{Back_Related_Work}

In this section we present a \emph{high level overview} of what has been done with regards to Home WiFi problems identification.

We present the two methods for network measurements, active and passive. We describe the main characteristics of each of them and list the pros and cons of each one.

\subsection{Wireless Monitoring Metrics}\label{Wireless Monitoring Metrics}

In the networking context and, to be more specific, in the network measurement context two approaches are well-known. These two approaches are \textbf{active} and \textbf{passive}. Each one of them has its own strong points and opportunity areas. In the following lines we outline the main characteristics of each one of them and what can be considered their pros and cons. Important to mention, we do not take a preference for one over the other. Each of the approaches will be best suited depending on the experiment goal and context.

\subsection*{Active}

Active measurement techniques are mainly characterized by its ability to capture the state of the network in real-time. In other words, active measurement can help to identify a condition when is present in the network. This characteristic is different from passive network which can be considered historical. Active measurements are also characterized by the use of probes. Probe packet are used to measure the state of the network. For example, ping, relies on ICMP request and replies to compute the Round-Trip Time from one host to another. An important consideration to bear  in mind when using active measurement techniques are the probes. It is important to define the size of the probes and how frequent are they sent into the network. Probes can add overhead to the network if their size is high compared to the capacity of the path or if they are sent too frequent. If probing is causing overhead to the network, the condition we want to measure will be caused by the same tool we are using to measure. Probing without the proper due diligence can lead to network degradation and/or biased measurements. In the following bullet points we outline the pros and cons of active measurement techniques.

\textbf{Pros}
\begin{itemize}
	\item Full ownership of the network is not required.
	\item They do not require large space to store data collected as generally, probe packets are small.
	\item Privacy concerns are minimal as probe packet used to measure are made of random data which has no sensitive information.
	\item Useful to get the state of the network in real-time.
\end{itemize}
	

\textbf{Cons}
\begin{itemize}
	\item They add overhead to the network as probe traffic is generated to conduct measurements.
	\item The very same probe packets being used to measure network conditions can cause network degradation.
	\item Biased results can be obtained if probing is conducted without due diligence of network conditions.
	\item They can only capture an instant of the network condition. If problem to be characterized is extended in time, active measurement might not measure it accurately.
\end{itemize}

\subsection*{Active Metrics}

\begin{itemize}
	%\item One-Way Delay
	\item \textbf{Round Trip Time}
	\begin{itemize}
		\item This metric takes into account the time it takes for a probe to leave the source, reach the destination and come back to the source. 
	\end{itemize}
	
	\item \textbf{Throughput}
	\begin{itemize}
		\item The amount of data that can be sent or received from or by a station will allow to identify how far are we from the PHY data rate. In practice the bandwidth is less than the PHY rate at which the station has connected to in 802.11 protocol PHY rate.
		\item In other words this measurement can help to identify how efficiently is the medium being used.
	\end{itemize}
	\item \textbf{Losses}
	\begin{itemize}
		\item Losses from Ping statistic will allow us to identify the rate loss during the experiment window.
	\end{itemize}
\end{itemize}

\subsection*{Passive}

Passive measurement techniques rely on a listening approach. The instrument conducting passive measurements in the network sits in a specific location along the path and records the metrics of interest. The instrument can be a component of then network itself, like a router, or can be a device devoted to measure, like a Wireless sniffer. An important different between active and passive techniques, is that passive tend to be historical. In an historical sense, passive measurements are more reliable to characterize a network problem which cover an extended time-frame. Active measurements are suitable to pinpoint a problem in the instant it happens, nevertheless they lack accuracy to characterize problems which cover and extended time-frame. Another difference with active measurements is that passive measurements do not trigger probes. Overhead within the network path caused by probe packets is not present with active measurement. When implementing passive measurements it is important to consider the resources of the measuring device. The device might require to have enough storage to store the data being collected. In a similar way, the computing capability of the device an be required to be high depending on the speed of the link being measured. A Gigabit link in a Core Router will produce significantly more data than an 100Mbps Ethernet link of an access switch. In our tool we have passive tools such implemented Wireless Sniffer and WiFi metrics collection from Wireless client and Access Point.
Outlined in the following list a high level summary of the Pros and Cons of passive measurement techniques.

\textbf{Pros}
\begin{itemize}
	\item No extra traffic is generated to collect metrics, risk of causing overhead is minimized.
	\item They are better suited to accurately characterize network problems which cover an extended time frame.
	\item In general they are able to collect large dataset leading to increased accuracy of network complications.

\end{itemize}


\textbf{Cons}
\begin{itemize}
	\item Data collected by them can be large. Large storage can be required to store data collected.
	\item Access to devices within the network is required in order to place the passive instrument.
	\item Measuring device might require to have computational power depending on the link being monitored and the granularity of data pursued.
	\item They are reactive, findings of network problem can be obtained after data has been analyzed.
	
\end{itemize}

\subsection*{Passive Metrics}

\begin{itemize}
	%\item \textbf{PHY Tx Rate}
	%\begin{itemize}
	%	\item The speed at which the device is connected to. Bitrate adaptation techniques are triggered based on channel conditions. Therefore this metric can assist to estimate the channel conditions.
	%\end{itemize}
	\item \textbf{RSSI - Received Signal Strength Indicator}
	\begin{itemize}
		\item The power at which the signal is being received by the device. Depending on the type of traffic specific RSSI thresholds are often defined to define where the lower bound is located. For example, for VoIP the min RSSI value for an acceptable VoIP call is -68 dBm. In the other hand an RSSI -40 dBm is expected to deliver a good VoIP experience.
	\end{itemize}
	\hfill \break
	\item \textbf{Busy Time}
	\begin{itemize}
		\item This metric is associated to the time the channel was busy, in other words the time channel was being used and therefore not eligible for data exchange. Reasons for channel busy time to be close to 100\% can be contention by other Wi-Fi devices or interference from non-Wi-Fi sources.
	\end{itemize}
	
	\item \textbf{PHY Tx Rate}
	\begin{itemize}
		\item 	The rate at which without medium access control, error correction or scheduling events the device is expected to operate with.
	\end{itemize}
	
	\item \textbf{Frame Delivery Ratio}
	\begin{itemize}
		\item Frame Delivery Ratio depicts the ratio between packets successfully received and total packet sent. The FDR metric can assist to get a sense of link quality. If FDR ratio is high then, the quality of the link can be perceived as good.
	\end{itemize}

\end{itemize}

\subsection{Where do we collect them?}

We list the different vantage points from where the metrics have been collected in our work. We describe the reason of collecting them at the specific vantage point. For example, a characteristic to strive for is accuracy. Getting RSSI from client A will be different from client B, even if they are located at a similar distance from AP. The difference can rely on NIC, OS, firmware, driver, etc.

\begin{itemize}
	\item \textbf{Bandwidth or Throughput} - We will measure it from the client as it is from the user that we want to get a sense of his experience. It is know that even with similar Wireless conditions devices can experience different bandwidth and bitrate. \cite{measuring_user_traffic}. Therefore we will measure bandwidth from the client perspective at not from the AP. Measuring from the AP will give us a sense of the AP perspective and not from the client which is the device from which the users access services. This metric is to be obtained using iPerf with UDP traffic.
	\item \textbf{PHY Tx Rate} - We will extract this metric from WiFi metrics at AP to identify at which rate was the frame being received sent. This correlates to identify the actual bit rate at which each frame is being sent. Metric is to be obtained from AP running Linux-based OS with the command \emph{iwconfig}. We have also added a wireless sniffer to collect packet captures of the traffic between wireless client and AP.
	\item \textbf{RSSI} - Measure to be collected at the wireless client. The RSSI varies on wireless client location and obstacles in the path from Wireless client to AP. Metric is to be obtained from Linux-based client with the command \emph{iwconfig}.
	\item \textbf{Noise} - A factor contributing to Wireless degradation is Noise, it is the Wireless interference coming from non-Wi-Fi sources. This can be caused by Microwave ovens, cordless phones and similar devices which "do not speak Wi-Fi language". Noise will be measured at both ends, client and AP as we strive to identify which one experience the more and less noise to pinpoint where the complication might rely. Poor AP or client placement. Command \emph{cat /proc/net/wireless}.
	\item \textbf{Busy Time} - We will measure it from the AP as it is the one servicing clients in a specific channel (channels), meaning that clients will be connecting to that serving channel. If the busy time of the channel is high, means there is interference or other AP and clients using the same channel. A corrective action can be switching to a less busy channel. The busy time is made of two components, WiFi (congestion) and non-Wi-Fi (interference). Command \emph{iw INTERFACE survey dump}	
		
\end{itemize}
		%\item Server
